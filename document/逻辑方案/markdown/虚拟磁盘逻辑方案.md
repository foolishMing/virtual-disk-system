# 虚拟磁盘逻辑方案

[toc]

## 修订记录

| 文档版本 | 更新时间   | 更新内容     | 更新人 |
| -------- | ---------- | ------------ | ------ |
| v0.1     | 2021-06-28 | 完成概要设计 | 郝绍明 |
| v0.2     | 2021-06-29 | 完成类图框架 | 郝绍明 |

## 基本术语说明

| 名称         | 定义 | 说明 | 示例 |
| ------------ | ---- | ---- | ---- |
| 树形结构目录 |      |      |      |
| 序列化       |      |      |      |

## 基本词汇表

| 中文   | 英文          |
| ------ | ------------- |
| 序列化 | Serialization |

## 概述

基于对需求文档的分析，本系统可大致被拆分为以下几个模块。

### 文件树(File Tree)

虚拟磁盘系统的基本数据元素包括目录与文件，本系统采用树形结构目录方式索引，使用多叉树数据结构维护。

系统初始根节点为目录节点，其节点命名为“C:”。

对于该多叉树上的节点而言，文件节点必定为叶节点；而目录节点则既可以是中间节点，也可以是叶子节点，这取决于该目录节点是否具有后继节点。

初始化系统后，当用户使用dir、md、rd、del、copy等命令时，实际是对多叉树上的节点进行增删改查等操作。

### 指令列表(Command List)

系统需要维护私有的指令集。

用户在终端命令行，以行为单位，不断输入指令。

若该输入为合法的系统指令，则系统接受该指令，并执行相应的虚拟磁盘操作。

该指令集需要支持参数的解析与扩展。

### 指令解释器(Command Interpreter)

对用户输入进行解析处理，以执行正确的指令。

### 路径解析器(Path Lookup Iterator)

对于任意目录或文件，需要维护路径信息。所谓路径信息，即从根节点到该节点的搜索路径。

对于路径，需要同时支持正反斜杠方向。

对于路径，需要支持绝对路径与相对路径两种索引方式。

对于路径，需要区分真实磁盘路径与虚拟磁盘路径（使用@通配符）

对于路径，需要支持模糊搜索（使用*与？通配符）

### 序列化组件(Serialization Component)

本系统需要支持对运行时对象数据的序列化与反序列化操作。

load：加载本地磁盘文件，重建虚拟磁盘。

save：将虚拟磁盘系统的运行时保存为本地文件。



## 详细设计

### 类图

### 状态机

### 时序图



## 接口设计

略

## 配置说明

略

## 数据库设计

略

## 风险估计

## 扩展讨论

## 工作量评估

略
